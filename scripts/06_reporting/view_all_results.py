import os

def print_section(title):
    print("\n" + "="*80)
    print(f"  {title}")
    print("="*80 + "\n")

def main():
    print("\n" + "="*80)
    print("  COMPLETE THESIS RESULTS SUMMARY")
    print("="*80)
    
    
    print_section("1. BASELINE SELF-PREFERENCE BIAS")
    
    print("Judge Model                    Biased Self-Preference")
    print("-" * 60)
    print("DeepSeek-R1                    79.93%  (215/269)")
    print("ChatGPT-4o                     54.33%  (138/254)")
    print("Claude-Haiku                   21.38%  (105/491)")
    print("-" * 60)
    print("AVERAGE                        51.88%")
    
    
    print_section("2. INTERVENTION EFFECTIVENESS (Bias Reduction)")
    
    print("Judge            Baseline   Markdown   Qwen BT   Qwen Para")
    print("-" * 70)
    print("DeepSeek-R1      79.93%     75.56%     75.10%    76.45%")
    print("ChatGPT-4o       54.33%     50.38%     49.60%    51.78%")
    print("Claude-Haiku     21.38%     22.40%     21.85%    24.05%")
    print("-" * 70)
    print("AVERAGE          51.88%     49.45%     48.85%    50.76%")
    print()
    print("Bias Reduction (percentage points):")
    print("-" * 70)
    print("DeepSeek-R1                    -4.36pp    -4.83pp   -3.48pp")
    print("ChatGPT-4o                     -3.95pp    -4.73pp   -2.55pp")
    print("Claude-Haiku                   +1.02pp    +0.46pp   +2.67pp")
    print("-" * 70)
    print("AVERAGE                        -2.43pp    -3.03pp   -1.12pp")
    print()
    print("Ranking: 1. Qwen BT (-3.03pp)  2. Markdown (-2.43pp)  3. Para (-1.12pp)")
    
    
    print_section("3. CLASSIFIER ACCURACY ON ALL INTERVENTIONS")
    
    print("Test Configuration                              Accuracy    Drop")
    print("-" * 70)
    print("Normal Classifier on Baseline                   80.50%      -")
    print("Normal Classifier on Markdown-Stripped          50.47%      -30.03pp")
    print("Normal Classifier on Qwen Back-Translation      75.26%      -5.24pp")
    print("Normal Classifier on Qwen Paraphrasing          47.03%      -33.47pp")
    print()
    print("Markdown-Free Classifier on Markdown-Stripped   76.57%      -3.93pp")
    print()
    print("Interpretation:")
    print("  • Markdown removal: Fooled normal classifier, but retrained stays high")
    print("  • Back-translation: Style mostly persists (-5.24pp)")
    print("  • Paraphrasing: Fooled classifier completely (-33.47pp)")
    
    
    print_section("4. THE PARADOXES")
    
    print("MARKDOWN REMOVAL PARADOX:")
    print("  Classifier accuracy drop:  -30.03pp")
    print("  Bias reduction:            -2.43pp")
    print("  Ratio:                     12.3:1")
    print()
    print("PARAPHRASING PARADOX:")
    print("  Classifier accuracy drop:  -33.47pp")
    print("  Bias reduction:            -1.12pp")
    print("  Ratio:                     29.9:1  ⚠️ EXTREME!")
    print()
    print("Interpretation:")
    print("  Paraphrasing successfully removed detectable style (classifier: 47%)")
    print("  BUT judges still recognized themselves (bias: -1.12pp only)")
    print("  → Judges use mechanisms INVISIBLE to stylometric classifiers!")
    
    
    print_section("5. SBERT SEMANTIC FIDELITY")
    
    print("Intervention                Mean Similarity    Status")
    print("-" * 70)
    print("Markdown Removal            1.0000             Perfect (no content change)")
    print("Qwen Back-Translation       ~0.87              High")
    print("Qwen Paraphrasing           0.8647             High")
    print()
    print("Qwen Paraphrasing Details:")
    print("  • Mean: 0.8647")
    print("  • Median: 0.8848")
    print("  • ≥0.80 (high): 83.9%")
    print("  • <0.60 (low): 1.9%")
    print()
    print("Conclusion: All interventions preserve semantic meaning ✓")
    
    
    print_section("6. FEATURE IMPORTANCE (XGBoost)")
    
    print("Top features that distinguish models:")
    print()
    print("CHAR n-grams (formatting):")
    print("  • **, ##, :, (, ), |")
    print()
    print("WORD n-grams (phrases):")
    print("  • 'Let me know', 'Hope this helps', 'Would you like'")
    print()
    print("POS n-grams (syntax):")
    print("  • Sentence structure patterns")
    print("  • Punctuation usage patterns")
    print()
    print("Note: Full feature importance available in preserved_outputs/")
    
    
    print_section("7. PER-MODEL CHARACTERISTIC FEATURES")
    
    print("DeepSeek-R1:")
    print("  • Heavy markdown usage (**, ###)")
    print("  • Technical vocabulary")
    print("  • Structured lists")
    print()
    print("ChatGPT-4o:")
    print("  • Conversational tone")
    print("  • Hedging phrases ('Let me know if...')")
    print("  • Social fillers")
    print()
    print("Claude-Haiku:")
    print("  • Formal language")
    print("  • Latin-root vocabulary")
    print("  • Complete sentences")
    print()
    print("Note: Detailed per-model analysis in preserved_outputs/")
    
    
    print_section("8. KEY FINDINGS SUMMARY")
    
    print("✓ Baseline bias: 51.88% (judges pick themselves ~half the time)")
    print("✓ Best intervention: Qwen Back-Translation (-3.03pp)")
    print("✓ Worst intervention: Qwen Paraphrasing (-1.12pp)")
    print()
    print("✓ Classifier baseline: 80.50% accuracy")
    print("✓ Markdown-free classifier: 76.57% (fingerprints persist)")
    print()
    print("✓ Paraphrasing paradox: 29.9:1 ratio (classifier vs bias)")
    print("✓ Semantic fidelity: All interventions ≥0.86 (meaning preserved)")
    print()
    print("CONCLUSION:")
    print("  Style-removal interventions have LIMITED effect (1-3pp reduction)")
    print("  Bias is driven by DEEP patterns invisible to classifiers")
    print("  LLM judges are fundamentally biased - cannot be fixed with style removal")
    
    
    print_section("9. WHERE TO FIND DETAILED RESULTS")
    
    print("Verified Results:")
    print("  • results/VERIFIED_RESULTS.txt")
    print("  • results/INTERVENTION_VALIDATION.txt")
    print("  • results/CRITICAL_AUDIT.txt")
    print()
    print("Metrics:")
    print("  • results/metrics/sbert_semantic_fidelity_results.txt")
    print("  • results/metrics/MARKDOWN_FREE_CLASSIFIER_ACCURACY.txt")
    print()
    print("Tables:")
    print("  • results/tables/FINAL_SELF_PREFERENCE_RESULTS.txt")
    print("  • results/tables/FINAL_SUMMARY_TABLE.txt")
    print()
    print("Case Studies:")
    print("  • results/case_studies/case_studies_persistent_bias.txt")
    print()
    print("Feature Analysis:")
    print("  • preserved_outputs/feature_importance.csv")
    print("  • preserved_outputs/normal_classifier_per_model_features.csv")
    print("  • preserved_outputs/markdown-free_classifier_per_model_features.csv")
    print()
    print("Comprehensive Summary:")
    print("  • ULTIMATE_THESIS_SUMMARY.md (in root directory)")
    
    print("\n" + "="*80)
    print("  END OF RESULTS SUMMARY")
    print("="*80 + "\n")

if __name__ == "__main__":
    main()
